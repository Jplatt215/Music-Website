{% extends "base.html" %}
{% block head %}{% endblock %}
{% block title %}Music Index{% endblock %}

{% block content %}
<head>
  <!-- Keep only your own CSS -->
  <link rel="stylesheet" href="{{ url_for('static', filename='scales.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='global.css') }}">
  <script src="{{ url_for('static', filename='scales.js') }}" defer></script>
  <title>Scale Calculator</title>
</head>
<div class="navbar-main">
  <a class="nav-item nav-link" id="index" href="/index">Music Index</a>
  <a class="nav-item nav-link" id="scales" href="/scales">Scale Calculator</a>
  <a class="nav-item nav-link" id="composer" href="/composer">Automated Composition</a>
</div>
  <body>
    <div class="header">
      <div class="selectScale">
        <button class="selectScaleButton"></button>
        <div class="select-Dropdown">
          <div class="row">
            <button class="startNoteButton">A</button>
            <button class="startNoteButton">Bb</button>
            <button class="startNoteButton">B</button>
            <button class="startNoteButton">C</button>
            <button class="startNoteButton">Db</button>
            <button class="startNoteButton">D</button>
            <button class="startNoteButton">Eb</button>
            <button class="startNoteButton">E</button>
            <button class="startNoteButton">F</button>
            <button class="startNoteButton">Gb</button>
            <button class="startNoteButton">G</button>
            <button class="startNoteButton">Ab</button>
          </div>
          <div class="row">
            <button class="scaleButton">Major</button>
            <button class="scaleButton">Minor</button>
          </div>
          <div class="row">
            <button class="scaleButton">Pentatonic Major</button>
            <button class="scaleButton">Pentatonic Minor</button>
          </div>
          <div class="row">
            <button class="scaleButton">Overtone (Theoretical)</button>
            <button class="scaleButton">Overtone (Audible)</button>
          </div>
          <div class="row">
            <button class="scaleButton">MOLT 1</button>
            <button class="scaleButton">MOLT 2</button>
            <button class="scaleButton">MOLT 3</button>
            <button class="scaleButton">MOLT 4</button>
            <button class="scaleButton">MOLT 5</button>
            <button class="scaleButton">MOLT 6</button>
            <button class="scaleButton">MOLT 7</button>
          </div>
          <div class="row">
            <button class="scaleButton">Placeholder</button>
            <button class="scaleButton">Placeholder</button>
          </div>
          <div class="row">
            <button class="scaleButton">Placeholder</button>
            <button class="scaleButton">Placeholder</button>
          </div>
          <div class="row">
            <button class="scaleButton">Placeholder</button>
            <button class="scaleButton">Placeholder</button>
          </div>
          <div class="row">
            <button class="scaleButton">Placeholder</button>
            <button class="scaleButton">Placeholder</button>
          </div>
          <div class="row">
            <button class="scaleButton">Placeholder</button>
            <button class="scaleButton">Placeholder</button>
          </div>
          <div class="row">
            <button class="scaleButton">Placeholder</button>
            <button class="scaleButton">Placeholder</button>
            <button class="scaleButton">Placeholder</button>
          </div>
        </div>
      </div>

      <div class="findScale">
        <button class="findScaleButton"></button>
        <div class="find-Dropdown">
          <div class="row">
            <button class="findNoteButton">A</button>
            <button class="findNoteButton">Bb</button>
            <button class="findNoteButton">B</button>
            <button class="findNoteButton">C</button>
            <button class="findNoteButton">Db</button>
            <button class="findNoteButton">D</button>
            <button class="findNoteButton">Eb</button>
            <button class="findNoteButton">E</button>
            <button class="findNoteButton">F</button>
            <button class="findNoteButton">Gb</button>
            <button class="findNoteButton">G</button>
            <button class="findNoteButton">Ab</button>
          </div>
          <div class="row">
            <button class="findScaleRunButton">
              Find Scales (Choose At Least 3 Notes)
            </button>
          </div>
            <div class="foundScales"></div>
        </div>
      </div>
    </div>

    <!-- Piano container -->
    <div class="piano" id="piano"></div>

    <script>
      const keys = [
        "C",
        "Db",
        "D",
        "Eb",
        "E",
        "F",
        "Gb",
        "G",
        "Ab",
        "A",
        "Bb",
        "B",
      ];
      const numOctaves = 7;

      const piano = document.getElementById("piano");

      for (let i = 0; i < numOctaves; i++) {
        let octaveKeys = keys;

        // Only include a subset of notes in the first octave
        if (i === 0) {
          octaveKeys = ["A", "Bb", "B"];
        }

        octaveKeys.forEach((key) => {
          const div = document.createElement("div");
          const audio = document.createElement("audio");

          div.setAttribute("data-note", key + i);
          div.classList.add("key");

          // Determine if it's a white or black key based on the note
          if (key.length === 1) {
            div.classList.add("white");
          } else {
            div.classList.add("black");
          }

          audio.id = key + i;
          audio.src =
            "{{ url_for('static', filename='notes/') }}" + key + i + ".mp3";

          piano.appendChild(audio);
          piano.appendChild(div);
        });
      }

      // Add the C8 key separately
      const c8Audio = document.createElement("audio");
      c8Audio.id = "C8";
      c8Audio.src = "{{ url_for('static', filename='notes/C8.mp3') }}";

      const c8Div = document.createElement("div");
      c8Div.classList.add("key", "white");
      c8Div.setAttribute("data-note", "C8");

      piano.appendChild(c8Audio);
      piano.appendChild(c8Div);
    </script>
  </body>
</html>
{% endblock %}
